<div class="container">

  <div class="row mt-20 mb-20">
    <h2>Configuración</h2>
  </div>

  <input type="hidden" id="ciudad_user" value="<%=@config_user.ciudad%>">

  <div class="row">
    <div class="col mb-100">
      <%= form_for @config_user, url: "/config_users/#{@config_user.id}", html: { id: "config_cliente_form", class:"" }, method: :put do |f| %>
      <div class="form-row">
        <div class="form-group col-md-4">
          <label for="inputPassword4">Nombre Comercial</label>
          <%= f.text_field :nombre, class:"form-control", maxLength: "50" %>
        </div>
        <div class="form-group col-md-3">
          <label for="inputEmail4">Categoría</label>
          <%= f.select(:category_id, options_from_collection_for_select(@categorias, "id", "name", @config_user.category_id), {:include_blank => 'Seleccionar...'}, :class => 'form-control', ) %>
        </div>
        <div class="form-group col-md-1">
          <label for="inputPassword4">Vista Cards</label>
          <%= f.select(:vista_card, options_for_select(@vista,@config_user.vista_card), {:include_blank => nil }, :class => 'form-control') %>
        </div>
        <div class="form-group col-md-2">
          <label for="inputPassword4">Logo</label>
          <%= f.file_field :logo, class:"form-control" %>
        </div>
        <div class="form-group col-md-2">
          <%if @config_user.logo.present?%>
            <img src="<%=@config_user.logo%>" class="img-responsive img-config">
          <%end%>
        </div>
      </div>
      <div class="form-row">
        <div class="form-group col-md-7">
          <label for="inputAddress">Descripción</label>
          <%= f.text_field :descripcion, class:"form-control", maxLength: "100"  %>
        </div>
      </div>
      <div class="form-row">
        <div class="form-group col-md-4">
          <label for="inputCity">Estado</label>
          <%= f.select(:estado, options_from_collection_for_select(@estados, "estado", "estado", @config_user.estado),{:include_blank => true}, {  :class => "form-control", :required => "required"}) %>	
        </div>
        <div class="form-group col-md-4">
          <label for="inputState">Ciudad</label>
          <select name="config_user[ciudad]" id="config_user_ciudad" class="form-control" required>
            <option value=""></option>
            <% @ciudades.each do |ci| %>
              <option value="<%=ci.ciudad%>" data-estado="<%=ci.estado%>"><%=ci.ciudad%></option>
            <%end%>
          </select>
        </div>
        <div class="form-group col-md-4">
          <label for="inputAddress2">Dirección</label>
          <%= f.text_field :direccion, class:"form-control" %>
        </div>
      </div>

      <div class="form-row">
        <div class="form-group col-md-3">
          <label for="inputCity">Página web</label>
          <%= f.text_field :pagina, class:"form-control" %>
        </div>
        <div class="form-group col-md-3">
          <label for="inputState">Facebook <i class="fab fa-facebook"></i></label>
          <%= f.text_field :facebook, class:"form-control" %>
        </div>
        <div class="form-group col-md-2">
          <label for="inputZip">Whatsapp <i class="fab fa-whatsapp"></i></label>
          <%= f.text_field :whatsapp, class:"form-control" %>
        </div>
        <div class="form-group col-md-2">
          <label for="inputZip">Horario</label>
          <%= f.text_field :horario, class:"form-control" %>
        </div>
        <div class="form-group col-md-2">
          <label for="inputZip">Realiza Facturación</label>
          <%= f.select(:factura, options_for_select(@facturacion,@config_user.factura), {:include_blank => 'Seleccionar...' }, :class => 'form-control') %>
        </div>
      </div>

      <div class="form-row">
        <div class="form-group col-md-6">
          <div class="form-row">
            <div class="form-group col-md-12">
              <label for="inputZip">Condiciones de Higiene</label>
              <%= f.text_area :condiciones_higiene, class:"form-control" %>
            </div>
          </div>
          <div class="form-row">
            <div class="form-group col-md-6">
              <label for="inputZip">Aviso para clientes</label>
              <%= f.text_area :aviso, class:"form-control" %>
            </div>
            <div class="form-group col-md-6">
              <label for="inputZip">Comentarios en pedidos</label>
              <%= f.text_area :comentario, class:"form-control" %>
            </div>
          </div>
        </div>
        <div class="col-md-6">
          <div class="form-row">
            <div class="form-group col-md-6">
              <label for="inputZip">Tipo de entrega</label>
              <%= f.select(:tipo_entrega, options_for_select(@tipos_entrega,@config_user.tipo_entrega), {:include_blank => 'Seleccionar...' }, :class => 'form-control') %>
            </div>
            <div class="form-group col-md-6">
              <label for="inputZip">Costo de envío</label>
              <div class="input-group mb-3">
                <div class="input-group-prepend">
                  <span class="input-group-text" id="basic-addon1">$</span>
                </div>
                <%= f.text_field :costo_envio, class:"form-control" %>
              </div>
            </div>
          </div>
          <div class="form-row">
            <div class="form-group col-md-6 mb-0">
              <label for="inputZip">Compra mínima</label>
              <div class="input-group mb-3">
                <div class="input-group-prepend">
                  <span class="input-group-text" id="basic-addon1">$</span>
                </div>
                <%= f.text_field :compra_minima, class:"form-control" %>
              </div>
            </div>
            <div class="form-group col-md-6 mb-0">
              <label for="inputZip">Forma de pago</label>
              <%= f.select(:metodo_pago, options_for_select(@formas_pago,@config_user.metodo_pago), {:include_blank => 'Seleccionar...' }, :class => 'form-control') %>
            </div>
          </div>
          <div class="form-row">
            <div class="form-group col-md-4">
              <label for="inputZip">Beneficiario</label>
              <%= f.text_field :beneficiario, class:"form-control" %>
            </div>
            <div class="form-group col-md-4">
              <label for="inputZip">Cuenta</label>
              <%= f.text_field :cuenta, class:"form-control" %>
            </div>
            <div class="form-group col-md-4">
              <label for="inputZip">Banco</label>
              <%= f.select(:banco, options_for_select(@bancos,@config_user.banco), {:include_blank => 'Seleccionar...' }, :class => 'form-control') %>
            </div>
          </div>
        </div>
      </div>

      <div class="text-center form-group">
        <button class="btn btn-success btn-lg" type="submit">Actualizar</button>
      </div>
      <%end%>

      <% if current_user.present? && (current_user.email == "manrobless@gmail.com" || current_user.email == "gustavomartinezserna47@hotmail.com" ) %>
        <div class="text-center form-row">
          <div class="col-0 col-md-4"></div>
          <div class="col-12 col-md-4">
            <p>Comparte tu link para recomendados:</p>
            <input type="text" class="form-control" value="<%=@link_recomendado%>" id="link_recomendado" disabled> <br>
            <button type="button" class="btn btn-sm btn-secondary" id="copiar_recomendado" onclick="copyRef()" onmouseout="outFuncRef()">Copiar link</button>
          </div>
        </div>
      <%end%>
    </div>
  </div>

</div>